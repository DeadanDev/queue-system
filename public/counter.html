<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Al-marjan | Counter</title>

    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="./styles/global.css">
    <link rel="stylesheet" href="./styles/counter.css">
</head>
<body>
    <div class="container">
        <div class="card card-header">
            <div class="title">
                AL-MARJAN
            </div>
        </div>
        <div class="card card-que">
            <div class="que">
                <div class="q-name">
                    WAIT
                </div>
                <div class="q-number">
                    1005
                </div>
            </div>
            <div class="divider-vertical"></div>
            <div class="que" id="q-next">
                <div class="q-name">
                    NEXT WAIT
                </div>
                <div class="q-number">
                    1006
                </div>
            </div>
            <div class="divider-horizontal"></div>
            <div class="que-current">
                <div class="q-name">
                    CURRENT SERVING
                </div>
                <div class="q-number">
                    1004
                </div>
            </div>
        </div>
        

        <div class="card card-button" id="q-button-all">
            <div class="btn-lg">
                <div class="btn-lg icon"><i class='bx bxs-bell'></i></div>
                <div class="btn-lg name">CALL</div>
                </a>
            </div>

            <!-- <div class="btn-lg">
                <div class="btn-lg icon"><i class='bx bx-subdirectory-left'></i></div>
                <div class="btn-lg name">RECALL</div>
            </div> -->

            <!-- <div id="popup1" class="overlay">
                <div class="popup">
                    <a class="close" href="#">&times;</a>
                    <div class="content">
                        <div id="content">
                            <div id="numpad">
                                <div class="numpad__header"></div>
                                <div class="display">
                                <div class="display-history">
                                <input id="history-expressions" type="text" disabled />
                                </div>
                                    <div class="display-results">
                                        <input id="input-display" type="text" value="0" />
                                    </div>
                                </div>
                                <div class="numpad__body">
                                    <div class="keypad">
                                    <div class="keypad__grid">                
                                        <button>1</button>
                                        <button>2</button>
                                        <button>3</button>
                            
                                        <button>4</button>
                                        <button>5</button>
                                        <button>6</button>
                            
                                        <button>7</button>
                                        <button>8</button>
                                        <button>9</button>
                            
                                        <div></div>
                                        <button>0</button>
                                        <button style="background: #DD3F3F;">&loarr;</button>
                                    </div>
                                    <div class="btn-wide">
                                        <div class="btn-wide name" style="margin: auto;">ADD NUMBER</div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->

            <div class="btn-lg">
                <div class="btn-lg icon"><i class='bx bx-check'></i></div>
                <div class="btn-lg name">DONE</div>
            </div>
            <div class="btn-lg">
                <div class="btn-lg icon"><i class='bx bx-skip-next'></i></i></div>
                <div class="btn-lg name">SKIP</div>
                
            </div>
            <div>
                <a class="btn-lg" href="#popup1">
                <div class="btn-lg icon"><i class='bx bx-subdirectory-left'></i></div>
                <div class="btn-lg name">RECALL</div>
                </a>
            </div>

            <div id="popup1" class="overlay">
                <div class="popup">
                    <a class="close" href="#">&times;</a>
                    <div class="content">
                        <div id="content">
                            <div id="numpad">
                                <div class="display">
                                    <div class="display-results">
                                        <input id="input-display" type="text" />
                                    </div>
                                </div>
                                <div class="numpad__body">
                                    <div class="keypad">
                                    <div class="keypad__grid">                
                                        <button>1</button>
                                        <button>2</button>
                                        <button>3</button>
                            
                                        <button>4</button>
                                        <button>5</button>
                                        <button>6</button>
                            
                                        <button>7</button>
                                        <button>8</button>
                                        <button>9</button>
                            
                                        <div></div>
                                        <button>0</button>
                                        <button style="background: #DD3F3F;">&loarr;</button>
                                    </div>
                                    <div class="btn-wide">
                                        <div class="btn-wide name" style="margin: auto; width: fit-content !important;">RECALL NUMBER</div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="btn-lg">
                <div class="btn-lg icon"><i class='bx bx-reset' ></i></div>
                <div class="btn-lg name">RESET</div>
            </div>
        </div>

        <div class="card card-listing">
            <div class="dateTime">
                <div class="date">
                    20 September 2021
                </div>
                <div class="time">
                    10.30 AM
                </div>
            </div>
            <div class="listing">
                <div class="list-detail">
                    <div class="list-detail ticket">Ticket No: 1001</div>
                    <div class="list-detail serve">Serving Time: 00.15.30</div>
                </div>
                <div class="list-time">
                    <div class="list-time icon">
                        <i class='bx bx-check'></i>
                    </div>
                    <div class="list-time record-time">8.15 AM</div>
                </div>
            </div>
            <div class="listing">
                <div class="list-detail">
                    <div class="list-detail ticket">Ticket No: 1002</div>
                    <div class="list-detail serve">Serving Time: 00.10.00</div>
                </div>
                <div class="list-time">
                    <div class="list-time icon">
                        <i class='bx bx-check'></i>
                    </div>
                    <div class="list-time record-time">8.25 AM</div>
                </div>
            </div>
            <div class="listing">
                <div class="list-detail">
                    <div class="list-detail ticket">Ticket No: 1003</div>
                    <div class="list-detail serve">Serving Time: 00.30.01</div>
                </div>
                <div class="list-time">
                    <div class="list-time icon">
                        <i class='bx bx-check'></i>
                    </div>
                    <div class="list-time record-time">8.55 AM</div>
                </div>
            </div>
            <div class="listing">
                <div class="list-detail">
                    <div class="list-detail ticket">Ticket No: 1004</div>
                    <div class="list-detail serve">Serving Time: Skip Number</div>
                </div>
                <div class="list-time">
                    <div class="list-time icon">
                        <i class='bx bx-skip-next'></i>
                    </div>
                    <div class="list-time record-time">9.11 AM</div>
                </div>
            </div>
        </div>

        <div class="card card-summary">
            <div class="que">
                <div class="q-name-total">
                    TOTAL SERVE
                </div>
                <div class="q-number-total">
                    8
                </div>
            </div>
            <div class="que">
                <div class="q-name-total">
                    WAITING
                </div>
                <div class="q-number-total">
                    -
                </div>
            </div>
        </div>

        <div class="card card-addList">
            <div>
                <a class="btn-wide" href="#popup1">
                <div class="btn-wide icon"><i class='bx bxs-message-square-add'></i></div>
                <div class="btn-wide name">ADD NUMBER</div>
                </a>
            </div>

            <div id="popup1" class="overlay">
                <div class="popup">
                    <a class="close" href="#">&times;</a>
                    <div class="content">
                        <div id="content">
                            <div id="numpad">
                                <div class="display">
                                    <div class="display-results">
                                        <input id="input-display" type="text" />
                                    </div>
                                </div>
                                <div class="numpad__body">
                                    <div class="keypad">
                                    <div class="keypad__grid">                
                                        <button>1</button>
                                        <button>2</button>
                                        <button>3</button>
                            
                                        <button>4</button>
                                        <button>5</button>
                                        <button>6</button>
                            
                                        <button>7</button>
                                        <button>8</button>
                                        <button>9</button>
                            
                                        <div></div>
                                        <button>0</button>
                                        <button style="background: #DD3F3F;">&loarr;</button>
                                    </div>
                                    <div class="btn-wide">
                                        <div class="btn-wide name" style="margin: auto; width: fit-content !important;">ADD NUMBER</div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <script>

        const buttons = document.querySelectorAll('button');
        const inputDisplay = document.querySelector('#input-display');
        const historyExpressions = document.querySelector('#history-expressions');
        
        const operators = ['+', '-', '*', '/'];
        let repeatedOperators = [];
        const valuesButton = [
          // 'C', '(', ')', '/',
          '1', '2', '3', 
          '4', '5', '6', 
          '7', '8', '9', 
          '0', 'x',
        ]
        
        buttons.forEach((button, i) => { button.value = valuesButton[i] });
        operators.forEach(operator1 => {
          operators.forEach(operator2 => {
            repeatedOperators.push(`${operator1}${operator2}`)
          })
        })
        
        buttons.forEach(button => {
          button.addEventListener('click', () => getCharacter(button.value));
        })
        
        function getCharacter(digit) {
          if (inputDisplay.value === '0' && !operators.find(op => op === digit) && digit !== 'C') {
            inputDisplay.value = digit;
          } else if (digit === 'C') {
            inputDisplay.value = '0';
          } else {
            inputDisplay.value += digit;
          }
        
          checkCharacter(inputDisplay.value, digit);
        }
        
        function checkCharacter(stringValue, digit) {
          const inputDisplayArr = stringValue.split('');
        
          if (repeatedOperators.find(op => op === stringValue.slice(-2))) {
            inputDisplayArr.splice(-2, 1);
            inputDisplay.value = inputDisplayArr.join('');
            latestOperators = '';
          }
        
          if (digit === '=') {
            inputDisplayArr.splice(-1, 1);
        
            solve(inputDisplayArr.join(''));
          }
        
          if (digit === 'x') {
            inputDisplayArr.pop();
            inputDisplayArr.pop();
            inputDisplay.value = inputDisplayArr.join('');
          }
        }
        
        </script>
</body>
</html>